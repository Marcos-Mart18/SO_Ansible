---
- name: Verificar servicios crÃ­ticos en Debian Server
  hosts: debianserver
  become: true
  gather_facts: yes

  tasks:
    - name: Obtener hechos de servicios
      ansible.builtin.service_facts:

    - name: Mostrar resumen de estado de servicios
      ansible.builtin.debug:
        msg:
          - "ğŸ§© Samba AD DC:        {{ (ansible_facts.services['samba-ad-dc.service'].state | default('no instalado')) }}"
          - "ğŸ’¡ Kea DHCPv4:         {{ (ansible_facts.services['kea-dhcp4-server.service'].state | default('no instalado')) }}"
          - "ğŸŒ Kea DHCPv6:         {{ (ansible_facts.services['kea-dhcp6-server.service'].state | default('no instalado')) }}"
          - "ğŸ“¡ Radvd (IPv6 RA):    {{ (ansible_facts.services['radvd.service'].state | default('no instalado')) }}"
          - "ğŸ”¥ nftables (NAT):     {{ (ansible_facts.services['nftables.service'].state | default('no instalado')) }}"
          - "ğŸŒ Apache2 (Web):      {{ (ansible_facts.services['apache2.service'].state | default('no instalado')) }}"
          - "âš™ï¸ Estado general:     'running' indica servicio activo âœ…"
      tags: [verify]
